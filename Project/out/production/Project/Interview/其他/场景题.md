海量数据找中位数？

1. 假设数字范围是int，总共文件有10G，内存只能容纳2G。

   答案：使用快排的partion思路，根据最高位的01将文件拆分为两部分。然后确定中位数应该在哪一部分中，再进行划分，直到中位数所在的文件小于内存大小可以被加载，使用排序算法找到对应下标的数即可。

2. 假设数字范围很小，总共文件10G。

   答案：使用桶排序，记录每个数字出现了多少次，然后推算中位数的下标。

海量数据排序？

海量数据找出现频率最高的？

哈希分治：

将大文件中的记录通过hash算法，分到不同的桶中，相同的记录分到相同的桶中。如果某个桶还无法被载入内存，那么对这个桶再进行hash，拆分成多个桶，保证每个桶大小能够被加载入内存。然后统计每个桶中单词出现频次，找到出现频率最高的。

URL存数据库，即使设置索引也很慢，如何改进?

这里可以认为是URL具有相同的前缀，根据索引设计原则来说，对于字符串索引应该尽可能短，但是如果过短就无法起到良好的区分效果。因此使用一种**hash映射**方法，将url映射成前缀差距大的hash值，然后可以使用短前缀做索引。为了解决冲突，把同时存hash和url。

统计网页访问量PV UV？

UV：使用redis的hyperloglog，将域名作为key，每个ip作为值，实现基数统计。

PV：将域名作为key，ip+stamp作为key。

定位linux中占用cpu高的线程

top

